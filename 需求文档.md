产品需求文档 (PRD) - SyncTab (安心开关)
文档属性	内容
项目名称	SyncTab (安心开关)
版本号	V3.0 (Liquid Glass & Control Island Edition)
框架  react native expo
适用平台	iOS / Android (React Native Expo)
核心体验	极简交互、物理震动反馈、毫秒级同步、液态视觉流体感
1. 全局设计规范 (Design System)
本应用采用 iOS26 "Liquid Glass" (液态玻璃) 设计语言，强调通透感、悬浮层级与流体背景。
1.1 视觉基础
背景 (Wallpaper): 全局不使用纯色背景，必须使用 Mesh Gradient (动态网格渐变)。
浅色模式: 极淡的蓝、粉、白交融，模拟清晨雾气。
深色模式: 深蓝、紫、黑交融，模拟极光夜空。
材质 (Material): 核心容器使用 Expo BlurView。
Glass-Card: intensity: 40, tint: 'default' (随系统)，叠加 1px 白色半透明边框 (rgba(255,255,255,0.3))。
Glass-Island: intensity: 80 (高模糊)，用于底部导航。
字体: iOS 系统字体 (San Francisco)，标题加粗，正文常规。
1.2 交互反馈
触觉 (Haptics): 核心原则。
开关翻转：Haptics.ImpactFeedbackStyle.Heavy (重击)。
长按/删除：Haptics.ImpactFeedbackStyle.Medium。
导航切换：Haptics.Selection。
动画 (Motion): 使用 Reanimated 实现流体过渡，拒绝生硬的闪烁。
2. 导航系统：液态控制岛 (Liquid Control Island)
替代传统的底部 TabBar，这是应用的视觉锚点。
2.1 组件定义
形态: 悬浮于屏幕底部中央的胶囊状玻璃体。
位置: Absolute Bottom: 34px (避开 Home Indicator), Width: 75%, Height: 64px。
层级: Z-Index: 100 (最高层级，但在弹窗之下)。
2.2 功能与交互
包含入口: [首页 Home]、[用户 User]、[设置 Settings]。
流体光标 (The Blob):
视觉: 图标下方并没有传统的下划线，而是一个高亮的光斑 (Glowing Blob) 在玻璃层下方游动。
逻辑: 当用户点击不同图标时，光斑通过弹性动画 (Spring Animation) 平滑流向目标位置，照亮当前选中的图标。
键盘避让: 当软键盘弹出时，控制岛自动向下平移隐藏 (TranslateY: 100)；键盘收起后上浮归位。

# SyncTab 页面功能与布局详解 (Page-by-Page Spec)

## 1. 页面一：控制台 (Home Dashboard)
**定位：** 核心操作区。用户 90% 的时间停留在此，用于查看状态和操作开关。

### 1.1 页面布局 (Layout)
*   **背景：** 全局动态 Mesh Gradient（网格渐变）。
*   **顶部导航 (Header - 悬浮玻璃):**
    *   **左侧：** [空间名称 + 下拉箭头]。点击弹出“切换空间”的 Bottom Sheet。
    *   **右侧：** [历史记录图标] (时钟)。点击弹出“历史记录”面板。
*   **主体区域 (Body - ScrollView):**
    *   **结构：** 双列瀑布流 (Masonry) 或 网格布局 (Grid)。
    *   **Padding：** 底部预留 100px，防止内容被底部的“控制岛”遮挡。

### 1.2 核心组件与功能
#### A. 开关卡片 (Switch Card)
*   **UI 设计：** 1:1 圆角矩形，磨砂玻璃材质。
    *   **OFF 状态：** 灰色磨砂背景 + 线性图标 + “等待锁门”。
    *   **ON 状态：** **高亮液态背景** (如半透明荧光绿) + 用户头像 + “已完成”。
*   **交互功能：**
    *   **点击 (Tap)：** 翻转状态 (OFF <-> ON)。触发**重度震动 (Heavy Haptics)**。
    *   **长按 (Long Press)：** 进入**删除模式**。
        *   表现：卡片开始抖动 (Wiggle)，右上角出现红色 **"X"** 按钮。
        *   操作：点击 "X" 删除该开关；点击空白处退出模式。

#### B. 添加按钮 (Add Button)
*   **位置：** 永远位于开关列表的**最后一个**。
*   **UI 设计：** 虚线边框的透明玻璃卡片，中心为细线条 "+" 号。
*   **功能：** 点击跳转至“新建开关”表单页（或弹出全屏模态框），输入名称、选择图标和重置规则。

#### C. 历史记录弹窗 (History Sheet)
*   **触发：** 点击顶部右侧“时钟”图标。
*   **UI 设计：** 半屏玻璃面板 (Bottom Sheet)，覆盖在页面上方。
*   **内容：** 时间轴列表，显示“谁 (头像) 在 几点 (时间) 做了 什么 (动作)”。

---

## 2. 页面二：用户与空间 (User & Space)
**定位：** 社交感知区。查看谁在家里（在线状态），以及邀请新成员。

### 2.1 页面布局 (Layout)
*   **顶部导航 (Header):** 仅显示大标题 “我的空间 (My Space)”。
*   **主体区域 (Body - Vertical Stack):** 垂直排列的卡片组。

### 2.2 核心组件与功能
#### A. 个人名片 (Hero Profile Card)
*   **UI 设计：** 页面顶部的大尺寸横向玻璃卡片。带有流光边框效果。
*   **内容：**
    *   左侧：当前登录用户的超大头像 (80px)。
    *   中间：昵称、用户ID。
    *   右侧：**今日贡献胶囊** (显示“今日操作 X 次”)。
*   **功能：** 点击可进入“编辑个人资料”模态框（修改头像/昵称）。

#### B. 成员状态网格 (Member Grid)
*   **UI 设计：** 3列网格布局。
*   **子组件 (Member Bubble)：**
    *   **头像：** 圆形玻璃包裹的头像。
    *   **在线状态 (Presence)：**
        *   **在线：** 头像右下角显示**绿色呼吸灯 (Glowing Dot)**。
        *   **离线：** 头像变灰，无状态点。
    *   **昵称：** 头像下方显示名字。
*   **功能：** 实时感知家庭成员是否打开了 App。

#### C. 邀请卡片 (Invite Card)
*   **位置：** 紧跟在成员列表的最后。
*   **UI 设计：** 虚线边框的圆形气泡，图标为“二维码”或“分享箭头”。
*   **功能：** 点击生成 6位邀请码 或 唤起系统分享菜单 (Share Sheet)，发送邀请链接给微信好友。

---

## 3. 页面三：设置 (Settings)
**定位：** 系统配置区。管理账户、外观和语言。

### 3.1 页面布局 (Layout)
*   **顶部导航 (Header):** 仅显示大标题 “设置 (Settings)”。
*   **主体区域 (Body):** 分组式列表 (Grouped List)。

### 3.2 核心组件与功能
#### A. 外观与语言 (Appearance & Language)
*   **UI 设计：** 独立的玻璃容器，内部包含自定义的切换器。
*   **功能 1：深浅模式切换**
    *   组件：类似“控制岛”风格的滑块 [ ☀️ | 🌙 | Auto ]。
    *   逻辑：切换后，全局背景 Mesh Gradient 立即改变色调（浅色为蓝粉，深色为黑紫）。
*   **功能 2：中英文切换**
    *   组件：分段控制器 [ 中文 | English ]。
    *   逻辑：点击后 App 文本立即刷新，无需重启。

#### B. 账户管理 (Account Group)
*   **UI 设计：** 标准的列表项 (List Item)，左侧图标，右侧箭头。
*   **功能点：**
    *   **震动反馈：** 开关 (Toggle)，允许用户关闭全局震动。
    *   **推送通知：** 开关 (Toggle)，控制是否接收“张三喂了猫”的通知。

#### C. 退出登录 (Logout)
*   **位置：** 页面最底部（在底部导航栏上方）。
*   **UI 设计：** 红色文字的玻璃按钮，居中显示。
*   **功能：** 点击清除本地 Token，跳转回登录页。

---

## 4. 底部导航：液态控制岛 (The Control Island)
**定位：** 连接上述三个页面的枢纽。

*   **形态：** 悬浮在屏幕底部中央的胶囊状玻璃体。
*   **包含图标：**
    1.  **首页 (Home)** -> 对应 Page 1
    2.  **用户 (User)** -> 对应 Page 2
    3.  **设置 (Settings)** -> 对应 Page 3
*   **交互逻辑：**
    *   点击图标切换页面。
    *   **流体光效：** 选中某个图标时，玻璃下方的高亮光斑会平滑地“流”向该图标位置，指示当前所在的页面。